<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style type="text/tailwindcss">
        @theme {
            --color-primary-purple: #6a0dad;
            --color-primary-purple-dark: #5a0a9d;
        }
    </style>
    <title>Tambah Penugasan (Panitia)</title>
</head>
<body class="bg-gray-100 flex">
    <%- include('../../partials/sidebar_admin') %>
    <div class="ml-64 flex-1 p-8">
        <div class="bg-white rounded-xl shadow-md p-8 max-w-2xl mx-auto">
            <h1 class="text-3xl font-bold mb-6 text-gray-800">Tambah Penugasan</h1>
            <form action="/admin/assignment" method="POST" enctype="multipart/form-data">
                <div class="mb-5">
                    <label for="title" class="block text-gray-700 text-sm font-bold mb-2">Judul:</label>
                    <input type="text" id="title" name="title" required
                        class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-purple-500"
                        placeholder="Masukkan judul penugasan">
                </div>

                <div class="mb-5">
                    <label for="description" class="block text-gray-700 text-sm font-bold mb-2">Deskripsi:</label>
                    <textarea id="description" name="description" rows="5" required
                        class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-purple-500"
                        placeholder="Masukkan deskripsi penugasan"></textarea>
                </div>

                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">File:</label>
                    <div class="flex items-center space-x-4 mb-4">
                        <label class="inline-flex items-center">
                            <input type="radio" id="uploadFile" name="fileType" value="file" checked
                                class="form-radio h-4 w-4 text-primary-purple">
                            <span class="ml-2 text-gray-700">Upload File</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" id="useLink" name="fileType" value="link"
                                class="form-radio h-4 w-4 text-primary-purple">
                            <span class="ml-2 text-gray-700">Gunakan Link</span>
                        </label>
                    </div>

                    <div id="fileUploadContainer">
                        <label for="file" class="block text-gray-700 text-sm font-bold mb-2">Pilih File:</label>
                        <input type="file" id="file" name="file"
                            class="block w-full text-sm text-gray-500
                            file:mr-4 file:py-2 file:px-4
                            file:rounded-full file:border-0
                            file:text-sm file:font-semibold
                            file:bg-purple-50 file:text-primary-purple
                            hover:file:bg-purple-100 cursor-pointer">
                    </div>
                    <div id="linkInputContainer" class="hidden">
                        <label for="link" class="block text-gray-700 text-sm font-bold mb-2">Link:</label>
                        <input type="url" id="link" name="link"
                            class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-purple-500"
                            placeholder="Masukkan URL link (misal: https://docs.google.com/...)">
                    </div>
                </div>

                <div class="flex justify-end space-x-4">
                    <button type="submit"
                        class="bg-purple-500 hover:bg-primary-purple-dark text-white font-bold py-2 px-6 rounded-lg focus:outline-none focus:shadow-outline transition-colors">
                        Submit
                    </button>
                    <button type="button" onclick="window.history.back();"
                        class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg focus:outline-none focus:shadow-outline transition-colors">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const uploadFileRadio = document.getElementById('uploadFile');
            const useLinkRadio = document.getElementById('useLink');
            const fileUploadContainer = document.getElementById('fileUploadContainer');
            const linkInputContainer = document.getElementById('linkInputContainer');
            const fileInput = document.getElementById('file');
            const linkInput = document.getElementById('link');

            function toggleInputs() {
                if (uploadFileRadio.checked) {
                    fileUploadContainer.classList.remove('hidden');
                    linkInputContainer.classList.add('hidden');
                    fileInput.required = true;
                    linkInput.required = false;
                    linkInput.value = '';
                } else {
                    fileUploadContainer.classList.add('hidden');
                    linkInputContainer.classList.remove('hidden');
                    fileInput.required = false;
                    linkInput.required = true;
                    fileInput.value = '';
                }
            }

            uploadFileRadio.addEventListener('change', toggleInputs);
            useLinkRadio.addEventListener('change', toggleInputs);

            toggleInputs(); // Set initial state
        });
    </script>
</body>
</html>